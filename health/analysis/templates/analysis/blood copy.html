{% extends "base.html" %}

{% block head %}
  <title>Analysis | Blood preasure</title>
{% endblock %}


{% block body %}
  <div class="Chart w-100">
    <h3 class="text-center">Blood preasure graph</h3>
    
    {{ diastolic.0.0 }}
    <canvas id="myChart"></canvas>
    <script>
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        data: {
            labels: [{% for data in data %}'{{data.created|date:"d-m-Y"}}',{% endfor %}],
            datasets: [{
                type: 'line',
                label: 'Systolic',
                order: 2,
                data: [{% for data in data %}{{data.systolic_bp}},{% endfor %}],
                backgroundColor: ['rgba(255, 99, 132, 0.3)'],
                borderColor: ['rgba(255, 99, 132, 1)'],
                borderWidth: 1.5,
                fill: true,
            }, {
                type: 'line',
                label: 'Diastolic',
                order: 1,
                data: [{% for data in data %}{{data.diastolic_bp}},{% endfor %}],
                backgroundColor: ['rgba(54, 162, 235, 0.5)'],
                borderColor: ['rgba(54, 162, 235, 1)'],
                borderWidth: 1.5,
                fill: true,
            }, {
                type: 'line',
                label: 'Diastolic',
                order: 0,
                data: [{% for data in data %}{{ systolic.2 }},{% endfor %}],
                backgroundColor: ['rgba(54, 162, 235, 0.5)'],
                borderColor: ['rgba(54, 162, 235, 1)'],
                borderWidth: 1.5,
            }],
        },
        options: {
            plugins: {
                legend: {
                    rtl: true,
                    labels: {
                        padding: 30,
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: '[mm Hg]',
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'measure day',
                    }
                }
            }
        }
    });
    </script>
  </div>
{% endblock %}


{% block script %}
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
{% endblock %}